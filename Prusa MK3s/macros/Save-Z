; 0:/macros/Save-Z
; This macro adds the current babystep offset to the Z trigger height and saves it to config-overide.g
; ! M501 needs to be in config.g to automatically be recalled on reset. If using mulitiple filament settings,
; and this is for a specific filament type, reccomend placing this yeilded information in the filament's config.g.

if move.axes[2].babystep !=0                                ; If no babysteps are currently adjusted - exit routine
	echo {move.axes[2].babystep ^  "mm - Baby stepping added to Z trigger height"}
	echo {"OLD: " ^ sensors.probes[0].triggerHeight ^ " NEW: " ^ sensors.probes[0].triggerHeight + move.axes[2].babystep}
	G31 Z{sensors.probes[0].triggerHeight + move.axes[2].babystep}
	M500 P10:31                                         ; save settings to config-overide.g - G31 P31 saves trigger height, 
	                                                    ; trigger value, and X and Y offsets for each possible Z probe type. 
							    ; P10 parameter saves the G10 tool offsets.

else
	echo "Baby stepping is not currently employed, exiting."
